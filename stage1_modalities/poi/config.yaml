# POI Modality Configuration

default:
  # Data source: 'osm_online' or 'pbf'
  data_source: osm_online

  # Path to PBF file (required if data_source is 'pbf')
  pbf_path: null

  # Output directory for embeddings
  output_dir: data/study_areas/${STUDY_AREA}/stage1_unimodal/poi

  # Processing parameters
  chunk_size: 1000
  max_workers: 4

  # Embedding methods
  use_hex2vec: true
  compute_diversity_metrics: true

  # POI categories: uses SRAI's HEX2VEC_FILTER by default
  # (15 OSM keys, 725 sub-tags). Do not override unless you have
  # a specific reason -- both Hex2Vec and GeoVex expect this filter.
  # To override, set poi_categories in the config dict passed to
  # POIProcessor.__init__.
  poi_categories: null  # null = use HEX2VEC_FILTER (default)

# Training configuration
training:
  # Target batch size (ramps up from initial_batch_size)
  batch_size: 4096

  # Initial batch size at epoch 0
  initial_batch_size: 512

  # EarlyStopping patience (epochs; 0 to disable)
  early_stopping_patience: 3

  # Hex2Vec settings
  hex2vec_epochs: 10
  hex2vec_encoder_sizes: [150, 75, 50]

  # GeoVex settings
  geovex_epochs: 8
  geovex_embedding_size: 32
  geovex_neighbourhood_radius: 4
  geovex_convolutional_layers: 2

# Category groupings for aggregated analysis
category_groups:
  food_drink:
    - restaurant
    - cafe
    - bar
    - pub
    - fast_food
    - bakery
    - food_court

  healthcare:
    - hospital
    - clinic
    - pharmacy
    - doctors
    - dentist

  education:
    - school
    - university
    - college
    - kindergarten
    - library

  retail:
    - supermarket
    - convenience
    - clothes
    - department_store
    - electronics

  recreation:
    - park
    - playground
    - sports_centre
    - fitness_centre
    - cinema
    - theatre

  transport:
    - parking
    - fuel
    - charging_station
    - station
    - stop_position

# Diversity metrics configuration
diversity_metrics:
  shannon_entropy: true
  simpson_diversity: true
  richness: true
  evenness: true

# H3 resolution settings
h3_resolutions:
  available: [8, 9, 10]
  default: 9

# Data sources by region
data_sources:
  netherlands:
    source: pbf
    pbf_url: "https://download.geofabrik.de/europe/netherlands-latest.osm.pbf"
    pbf_path: "data/raw/osm/netherlands-latest.osm.pbf"

  cascadia:
    source: pbf
    pbf_url: "https://download.geofabrik.de/north-america/us-west-latest.osm.pbf"
    pbf_path: "data/raw/osm/us-west-latest.osm.pbf"

  default:
    source: osm_online

# Performance optimization
performance:
  use_multiprocessing: true
  memory_limit: 8192
  api_batch_size: 100
  api_rate_limit: 1
  use_cache: true
  cache_dir: "data/cache/poi"
